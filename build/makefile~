### Nombre del compilador
CC=icpc	

# librerias para el enlazador
#mkl version 2011
LPMKL=/opt/intel/composerxe/mkl/lib/intel64

## includes para el compilador
IMKL=/opt/intel/composerxe/include # version 2011

### Opciones del compilador
CFLAGS=-c -g -O3 #-fcolor-diagnostics

#para mkl 11.1, estatico, enteros de 32 bits
#LDFLAGS=-static -L$(LPMKL) -I$(IMKL) -Wl,--start-group $(LPMKL)/libmkl_intel_lp64.a $(LPMKL)/libmkl_intel_thread.a $(LPMKL)/libmkl_core.a -Wl,--end-group -openmp -lpthread

#linkado dinamico, version en paralelo (thread). enteros de 64 bits
#LDFLAGS=-L$(LPMKL) -I$(IMKL)-lmkl_intel_ilp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread -lm 

LDFLAGS=-L$(LPMKL) -I$(IMKL) -lmkl_intel_lp64 -lmkl_core -lmkl_sequential -lpthread -ldl

### Objetos a compilar
OBJS= main.o aleat.o inic.o termo.o mensajes.o colision.o salida.o
##SCRS=


MPEMBA: $(OBJS)
	$(CC) $(LDFLAGS) $(OBJS) -o MPEMBA
#	$(CC) -o HCS2 -static $(OBJS)

main.o: ../main.cpp ../params.h
	$(CC) -I$(IMKL) $(CFLAGS) ../main.cpp

aleat.o: ../aleat.cpp ../params.h 
	$(CC) $(CFLAGS) ../aleat.cpp 

mensajes.o: ../mensajes.cpp ../params.h 
	$(CC) $(CFLAGS) ../mensajes.cpp 

termo.o: ../termo.cpp ../params.h
	$(CC) $(CFLAGS) ../termo.cpp 

inic.o: ../inic.cpp ../params.h
	$(CC) -I$(IMKL) $(CFLAGS) ../inic.cpp

colision.o: ../colision.cpp ../params.h
	$(CC) -I$(IMKL) $(CFLAGS) ../colision.cpp  

salida.o: ../salida.cpp ../params.h 
	$(CC) $(CFLAGS) ../salida.cpp
	 
all: MPEMBA $(OBJS)

.PHONY: clean
clean: 
	rm MPEMBA $(OBJS)

